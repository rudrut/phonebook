(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var a=t(1),i=t.n(a),c=t(16),o=t.n(c),u=(t(7),t(5)),r=t(3),l=t(0),s=function(e){var n=e.personsToShow,t=e.button;return Object(l.jsxs)("div",{children:[n," ",t]})},h=function(e){var n=e.value,t=e.onChange;return Object(l.jsxs)("div",{children:["Filter by: ",Object(l.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.name,t=e.number;return Object(l.jsx)("div",{children:Object(l.jsxs)("h6",{children:[n," ",t]})})},m=function(e){var n=e.namevalue,t=e.numbervalue,a=e.onSubmit,i=e.onNameChange,c=e.onNumberChange,o=e.reset;return Object(l.jsxs)("form",{onSubmit:a,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{namevalue:n,onChange:i})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{numbervalue:t,onChange:c})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",onClick:o,children:"add"})}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"reset",children:"reset fields"})})]})},b=t(4),j=t.n(b),f="/api/persons",O=function(){return j.a.get(f).then((function(e){return e.data}))},v=function(e){return j.a.post(f,e).then((function(e){return e.data}))},g=function(e,n){return j.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},x=function(e,n){return j.a.delete("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){var n=e.message;return null===n?null:Object(l.jsx)("div",{className:"success",children:n})},p=function(e){var n=e.message;return null===n?null:Object(l.jsx)("div",{className:"error",children:n})},P=function(){var e=Object(a.useState)([]),n=Object(r.a)(e,2),t=n[0],i=n[1],c=Object(a.useState)(""),o=Object(r.a)(c,2),b=o[0],j=o[1],f=Object(a.useState)(""),P=Object(r.a)(f,2),C=P[0],S=P[1],T=Object(a.useState)(""),y=Object(r.a)(T,2),N=y[0],k=y[1],F=Object(a.useState)(!1),L=Object(r.a)(F,2),D=L[0],B=(L[1],Object(a.useState)(null)),E=Object(r.a)(B,2),I=E[0],J=E[1],A=Object(a.useState)(null),M=Object(r.a)(A,2),q=M[0],z=M[1];Object(a.useEffect)((function(){O().then((function(e){i(e)}))}),[]);var G=D?t:t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(w,{message:q}),Object(l.jsx)(p,{message:I}),Object(l.jsx)(h,{value:N,onChange:function(e){k(e.target.value)}}),Object(l.jsx)("h2",{children:"Add new contact info"}),Object(l.jsx)(m,{onSubmit:function(e){e.preventDefault();var n={name:b,number:C};if(t.find((function(e){return e.name===b}))){if(window.confirm("Person already exists, do you wish to update number?")){var a=t.find((function(e){return e.name===b})),c=a.id,o=Object(u.a)(Object(u.a)({},a),{},{number:C});g(c,o).then((function(e){i(t.map((function(n){return n.id!==c?n:e}))),z("Number '".concat(a.number,"' was successfully updated")),j(""),S(""),setTimeout((function(){z(null)}),5e3)})).catch((function(){J("Something went wrong, please reset fields and try again."),setTimeout((function(){J(null)}),5e3)})).catch((function(e){b.length<3&&(J("Person validation failed: name: Path 'name' (".concat(b,") is shorter than the minimum allowed length (3).")),setTimeout((function(){J(null)}),5e3)),C.length<8&&(J("Person validation failed: number: Path 'number' (".concat(C,") is shorter than the minimum allowed length (8).")),setTimeout((function(){J(null)}),5e3)),C.length<8&&b.length<3&&(J("Person validation failed: name: Path 'name' (".concat(b,") is shorter than the minimum allowed length (3). \n            Person validation failed: number: Path 'number' (").concat(C,") is shorter than the minimum allowed length (8).")),setTimeout((function(){J(null)}),5e3))}))}}else v(n).then((function(e){i(t.concat(e)),z("Person '".concat(e.name,"' was successfully added")),j(""),S(""),setTimeout((function(){z(null)}),5e3)})).catch((function(e){b.length<3&&(J("Person validation failed: name: Path 'name' (".concat(b,") is shorter than the minimum allowed length (3).")),setTimeout((function(){J(null)}),5e3)),C.length<8&&(J("Person validation failed: number: Path 'number' (".concat(C,") is shorter than the minimum allowed length (8).")),setTimeout((function(){J(null)}),5e3)),C.length<8&&b.length<3&&(J("Person validation failed: name: Path 'name' (".concat(b,") is shorter than the minimum allowed length (3). \n          Person validation failed: number: Path 'number' (").concat(C,") is shorter than the minimum allowed length (8).")),setTimeout((function(){J(null)}),5e3))}))},namevalue:b,onNameChange:function(e){j(e.target.value),console.log(e.target.value)},numbervalue:C,onNumberChange:function(e){S(e.target.value)}}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(s,{personsToShow:G.map((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)(d,Object(u.a)({},e))," ",Object(l.jsx)("button",{onClick:function(){return function(e){var n=e;window.confirm("Do you really want to delete?")&&(x(e),i(t.filter((function(e){return e.id!==n}))))}(e.id)},children:" delete "})]},e.id)}))}),Object(l.jsx)("div",{})]})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,a=n.getFID,i=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),a(e),i(e),c(e),o(e)}))};o.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(P,{})}),document.getElementById("root")),C()},7:function(e,n,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.0e45026f.chunk.js.map